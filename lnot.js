/*
BY CLASICK
https://www.margonem.pl/?task=profile&id=2286497
Wykorzystywanie lub modyfikowanie jakiejkolwiek czÄĹci kodu bez zgody autora jest zabronione.
Update: MaĹo znaczÄce poprawki
*/
var ln={engine:function(){(function(a){lootItem=function(b){if(a(b),/legendary/.test(b.stat)){$("style.ln_anim").length||"noborder"==ln.vars.settings.border||$("<style class=\"ln_anim\">@-webkit-keyframes pulser{0%,100%{box-shadow:0 0 50px 30px "+ln.vars.settings.color+",0 0 20px 30px #000}20%{box-shadow:0 0 80px 60px "+ln.vars.settings.color+",0 0 80px 70px #000}}@keyframes pulser{0%,100%{box-shadow:0 0 50px 30px "+ln.vars.settings.color+",0 0 20px 30px #000}20%{box-shadow:0 0 80px 60px "+ln.vars.settings.color+",0 0 80px 70px #000}}</style>").appendTo("head"),"0"!=ln.vars.settings.vol&&ln.audio("0"),!0==ln.vars.settings.showMsg&&message("Gratulacje! Spad\u0142a [color="+ln.vars.settings.color+"]*legenda*[/color]"),"object"==typeof hero.clan&&!0!=ln.vars.settings.clanMsg&&ln.msg.send("/k "+ln.vars.settings.prefix+" "+b.name+" "+ln.vars.settings.suffix+" - "+ln.vars.name),"noborder"!=ln.vars.settings.border&&$("div#loots").css({"box-shadow":"0 0 50px 30px "+ln.vars.settings.color+", 0 0 20px 30px black","-webkit-animation":"noborder"==ln.vars.settings.border?"none":"pulser 2s ease 2s 5",animation:"noborder"==ln.vars.settings.border?"none":"pulser 2s ease 2s 5"});var c="ITEM#"+b.hid+"."+ln.vars.world;$("<div style=\"font-size: 13px;text-align:center;\"><u class=\"chnick\">&times;"+b.name+"&times;</u><br /><span style=\"color: "+ln.vars.settings.color+"; text-shadow: 0 0 1px black, 1px 1px 2px "+ln.vars.settings.color+"; display: block;\" tip=\"Kliknij, aby otworzy\u0107 menu udost\u0119pniania\" onclick=\"ln.msg.share({id:'"+c+"',name:'"+b.name+"'});\">["+c+"]</span><span class=\"chnick\" style=\"font-size:12px;\" onclick=\"ln.config.open();\">&#10093;"+ln.vars.name+"&#10092;</span></div>").appendTo("#chattxt"),log("<span style=\"color: aqua; text-shadow: 0 0 1px aqua, 0 0 5px aqua;\">&#10093;</span><span style=\"color:yellow; text-shadow: 0 0 1px yellow, 0 0 5px yellow; font-size: 18px;\">"+b.name+"</span><span style=\"color: aqua; text-shadow: 0 0 1px aqua, 0 0 5px aqua;\">&#10092;</span> <span style=\"color:"+ln.vars.settings.color+"; text-shadow: 0 0 3px "+ln.vars.settings.color+"; font-size: 18px;\">"+c+"</span>"),document.title="Legenda! Margonem MMORPG";var d=setInterval(function(){$("#loots").is(":visible")||(document.title="*L* | Margonem MMORPG",$("div#loots").css({"box-shadow":"none",animation:"none"}),clearInterval(d),$("style.ln_anim").length&&$("style.ln_anim").remove())},2e3)}else if(/Jeden ze skĹadnikĂłw legendarnej zbroi wykuwanej przez krasnoludy/.test(b.stat)){"0"!=ln.vars.settings.vol&&ln.audio("1"),document.title="Kamie\u0144! Margonem MMORPG";var d=setInterval(function(){$("#loots").is(":visible")||(document.title="*K* | Margonem MMORPG",clearInterval(d))},3e3)}}})(lootItem),g.loadQueue.push({fun:function(){ln.config.load(),setTimeout(function(){ln.news.engine()},5e3)}}),$("<style>input.ln {border: 1px solid black; background: rgba(0,0,0,0.3); padding: 2px 4px; transition: 0.3s;} input[type=\"text\"]:focus {background: rgba(0,0,0,0.4);}</style>").appendTo("head")},config:{load:function(){var a=localStorage.ln_pos?localStorage.ln_pos.split("|"):["5","5"];$("<div class=\"clasick_ln\"></div>").css({background:"url(https://micc.garmory-cdn.cloud/obrazki/itemy/but/buty135.gif)",width:"32px",height:"32px",zIndex:"500",position:"absolute",left:a[0]+"px",top:a[1]+"px",transition:"transform 0.5s, filter 0.5s"}).appendTo("body").draggable({containment:"window",start:function(){g.lock.add("ln_moving"),$(this).css("cursor","move")},stop:function(){g.lock.remove("ln_moving"),$(this).css("cursor","default"),localStorage.ln_pos=$(this).position().left+"|"+$(this).position().top}}).attr("tip","<div style=\"text-align:center; padding: 3px 6px;\"><u style=\"font:14px Tahoma;\">"+ln.vars.name+"</u></div>").click(function(){ln.config.open()}).mouseenter(function(){$(this).css({transform:"scale(1.1) rotate(-20deg)",filter:"sepia(100%)"})}).mouseleave(function(){$(this).css({transform:"scale(1.0)",filter:"sepia(0%)"})})},open:function(){showEnWindow(ln.vars.name,"<div style=\"text-align:center; width: 400px; resize: horizontal;\"><h3>Klanowe komunikaty</h3><input type=\"text\" class=\"ln ln_prefix\" placeholder=\"Prefix\" value=\""+ln.vars.settings.prefix+"\" tip=\"Minimum 4 znaki\" /> NAZWA <input type=\"text\" class=\"ln ln_suffix\" placeholder=\"Suffix\" value=\""+ln.vars.settings.suffix+"\" tip=\"Minimum 1 znak\" /><br /><label><input type=\"checkbox\" class=\"ln ln_clanMsg\" "+(!0==ln.vars.settings.clanMsg?"checked":"")+"/>Nie informuj klanu</label><br /><table style=\"width: 90%; border-collapse:collapse; margin: 3px auto;\"><tr><td style=\"border-right: 1px solid rgba(0,0,0,0.2); vertical-align: baseline;\"><h3>Obramowanie \u0142up\xF3w</h3><span style=\"font-size:18px;\">Kolor: </span><input type=\"color\" name=\"color_pick\" value=\""+ln.vars.settings.color+"\" tip=\"Kliknij, aby wybra\u0107 kolor\" style=\"cursor: pointer; width: 50px; vertical-align: middle; appearance:none; -webkit-appearance: none; padding: 0; border: 1px solid silver;\" /><br / ><label><input type=\"radio\" name=\"obramowanie\" value=\"noanim\" "+("noanim"==ln.vars.settings.border?"checked":"")+"/>Bez animacji</label><label><input type=\"radio\" name=\"obramowanie\" value=\"anim\" "+("anim"==ln.vars.settings.border?"checked":"")+"/>Z animacj\u0105</label><br /><label><input type=\"radio\" name=\"obramowanie\" value=\"noborder\" "+("noborder"==ln.vars.settings.border?"checked":"")+"/>Wy\u0142\u0105cz obramowanie</label></td><td style=\"border-left: 1px solid rgba(0,0,0,0.5); vertical-align: baseline;\"><h3>D\u017Awi\u0119ki</h3><div style=\"width: 120px; margin: 0px auto;\"><input type=\"range\" class=\"ln_volrange\" style=\"width: 60px;\" min=\"0.0\" max=\"1.0\" step=\"0.1\" value=\""+ln.vars.settings.vol+"\" oninput=\"$('.volume_level').text(this.value*100+'%');\" /><span class=\"volume_level\" style=\"font-size:18px; position:absolute; right: 15px;\">"+100*ln.vars.settings.vol+"%</span></div><span style=\"cursor: pointer; font-size:24px;\" onclick=\"ln.config.soundChange.o();\">&#128266; <u style=\"color:#B9482C; cursor: pointer; font-size: 18px;\">zmie\u0144</u></span></td></tr></table><label><input type=\"checkbox\" class=\"ln ln_showMsg\" "+(!0==ln.vars.settings.showMsg?"checked":"")+"/>Pokazuj wiadomo\u015B\u0107 na \u015Brodku ekranu</label><br /><table style=\"width: 90%; border-collapse:collapse; margin: 3px auto;\"><tr><td><span style=\"font-size:16px;\"><span style=\"cursor:pointer; display: block; font-size: 24px; text-shadow: 0 0 3px black, 3px 3px 5px black, 0 0 10px black;\" onclick=\"ln.news.show();\">v"+ln.vars.version+"</span> &copy; <a href=\"https://www.margonem.pl/profile/view,2286497\" target=\"_blank\">cLAsick</a> | <img src=\"https://cdn.cdnlogo.com/logos/d/64/discord.png\" style=\"width:20px;vertical-align:middle;\" /><a href=\"https://discord.gg/Tb32NXZ\" target=\"_blank\" tip=\"<b>cLAsick Addons</b><br />Oficjalny serwer dodatk\xF3w by cLAsick\">Discord</a></span></td><td>"+drawButton("aktualne ustawienia","ln.config.current();")+"<br />"+drawButton("Zapisz","ln.config.save({prefix:$('input.ln_prefix').val(),suffix:$('input.ln_suffix').val(),color:$('input[type=color]').val(),clanMsg:$('input.ln_clanMsg')[0].checked,showMsg:$('input.ln_showMsg')[0].checked,vol:$('input.ln_volrange')[0].value,border:$('input[type=radio]:checked').val()});")+drawButton("Reset","ln.reset(); hideEnWindow();")+"</td></tr></table></div>")},current:function(){var a="";switch(ln.vars.settings.border){case"anim":a="z animacj\u0105";break;case"noanim":a="bez animacji";break;case"noborder":a="ca\u0142kiem wy\u0142\u0105czone";break;default:a="";}showEnWindow(ln.vars.name,"<div style=\"text-align:center;\"><h2 style=\"margin-bottom: 5px;\">Aktualne ustawienia</h2><b>Klanowy komunikat</b><br />&#171;"+hero.nick+"&#187; "+ln.vars.settings.prefix+"NAZWA"+ln.vars.settings.suffix+"<br /><b>Obramowania: </b><span style=\"display:inline-block;height:15px;width:15px;border-radius:5px;vertical-align:middle; box-shadow:0 0 1px 1px black;margin:1px;background:"+ln.vars.settings.color+"\" tip=\"HEX: "+ln.vars.settings.color+"\"></span> "+a+"<br />Informuj klan: "+(!0==ln.vars.settings.clanMsg?"<span style=\"color:maroon;text-shadow:0 0 2px black;\">NIE</span>":"<span style=\"color:#02bb02;text-shadow:0 0 2px black;\">TAK</span>")+"<br />D\u017Awi\u0119ki: "+("0"==ln.vars.settings.vol?"<span style=\"color:maroon;text-shadow:0 0 2px black;\">NIE</span>":"<span style=\"color:#02bb02;text-shadow:0 0 2px black;\">TAK</span>")+" ("+100*ln.vars.settings.vol+"%)<br />Wiadomo\u015B\u0107 na \u015Brodku: "+(!1==ln.vars.settings.showMsg?"<span style=\"color:maroon;text-shadow:0 0 2px black;\">NIE</span>":"<span style=\"color:#02bb02;text-shadow:0 0 2px black;\">TAK</span>")+"<br />"+drawButton("Wr\xF3\u0107","ln.config.open();")+drawButton("Wyjd\u017A","hideEnWindow();")+"</div>")},save:function(a){4<=a.prefix.length&&1<=a.suffix.length?JSON.stringify(a)==JSON.stringify(ln.vars.settings)?message("Nic nie zmieniono"):(localStorage.ln_settings=JSON.stringify(a),ln.vars.refresh(),message("Zmiany zosta\u0142y zapisane"),hideEnWindow()):(message("[color=maroon]Prefix: minimum 4 znaki[/color]"),message("[color=maroon]Suffix: minimum 1 znak[/color]"))},soundChange:{tip:()=>{showEnWindow(ln.vars.name,"<div style=\"text-align:center;\"><h2>Wybierz spos\xF3b ustawienia d\u017Awi\u0119ku</h2>"+drawButton("Discord","$('.tips .google, .tips .inne').hide(); $('.tips .discord').show();")+" "+drawButton("Dysk Google","$('.tips .discord, .tips .inne').hide(); $('.tips .google').show();")+" "+drawButton("Inne","$('.tips .discord, .tips .google').hide(); $('.tips .inne').show();")+"<div class=\"tips\"><span class=\"discord\" style=\"display: none;\">Prze\u015Blij sw\xF3j d\u017Awi\u0119k gdziekolwiek na Discordzie, a nast\u0119pnie kliknij na za\u0142\u0105cznik PPM <sup tip=\"PPM - Prawy przycisk myszy\">[?]</sup> i skopiuj adres. Wklej, <b>przetestuj</b> czy dzia\u0142a, zapisz i gotowe!</span><span class=\"google\" style=\"display: none;\">Wejd\u017A na sw\xF3j <a href=\"https://drive.google.com/\" target=\"_blank\">Dysk Google</a>, znajd\u017A wybrany plik d\u017Awi\u0119kowy (lub je\u015Bli go nie masz - prze\u015Blij go na sw\xF3j Dysk Google) a nast\u0119pnie kliknij na niego PPM <sup tip=\"PPM - Prawy przycisk myszy\">[?]</sup> i wybierz <u>Udost\u0119pnij</u>.<br />W sekcji \"Pobierz link\" kliknij <b>Kopiuj link</b>. Wejd\u017A na konwerter: <a href=\"https://sites.google.com/site/gdocs2direct/\" target=\"_blank\">[url #1]</a> <a href=\"https://www.wonderplugin.com/online-tools/google-drive-direct-link-generator/\" target=\"_blank\">[url #2]</a>, przekonwertuj skopiowany adres i wklej go w pole zmiany d\u017Awi\u0119ku. <b>Przetestuj</b> czy dzia\u0142a, zapisz i gotowe!</span><span class=\"inne\" style=\"display: none;\">1. Mo\u017Cesz wklei\u0107 bezpo\u015Bredni link do d\u017Awi\u0119ku z dowolnej strony, kt\xF3ra takie linki oferuje.<br />2. D\u017Awi\u0119ki z YouTube nale\u017Cy najpierw pobra\u0107 na komputer i post\u0119powa\u0107 wed\u0142ug wskaz\xF3wek dla Discord / Dysk Google.</span></div><hr /><b style=\"font-size:18px;\">Pami\u0119taj!</b> im d\u0142u\u017Cszy d\u017Awi\u0119k, tym wi\u0119ksze op\xF3\u017Anienie odegrania d\u017Awi\u0119ku. Zalecana d\u0142ugo\u015B\u0107 trwania d\u017Awi\u0119ku - maks. 30s.<br /><span style=\"color:red; text-shadow: 0 0 1px red;\">Bezpo\u015Brednie adresy z YouTube <b>nie s\u0105</b> obs\u0142ugiwane.</span><br />"+drawButton("wr\xF3\u0107","ln.config.soundChange.o();")+"</div>")},t:function(b){if(b){$("audio.ln_testsound").length||$("<audio class=\"ln_testsound\" type=\"audio/mp3\"></audio>").appendTo("body");var a=$("audio.ln_testsound").attr("src",b).get(0);a.pause(),a.currentTime=0,a.volume=parseFloat(ln.vars.settings.vol),a.oncanplay=function(){a.play()},a.onpause=function(){a.remove()},a.onerror=function(){a.remove(),message("Ups, wyst\u0105pi\u0142 b\u0142\u0105d podczas wczytywania d\u017Awi\u0119ku.")},a.onended=()=>{a.remove()}}},o:function(){showEnWindow(ln.vars.name,"<div style=\"text-align:center;\"><h3>Zmie\u0144 d\u017Awi\u0119ki</h3><span style=\"cursor: pointer; color:red; text-shadow: 0 0 5px red; display: inline-block; margin: 10px auto;\" onclick=\"ln.config.soundChange.tip();\">Koniecznie przeczytaj wskaz\xF3wk\u0119<br />dotycz\u0105c\u0105 zmiany d\u017Awi\u0119k\xF3w!</span><br /><i>Je\u015Bli chcesz zostawi\u0107 d\u017Awi\u0119k domy\u015Blny - pozostaw puste</i><br /><input type=\"text\" style=\"margin: 2px auto; text-align: center; width: 280px; letter-spacing: -0.5px;\" class=\"ln ln_sound_l\" placeholder=\"d\u017Awi\u0119k legendy\" value=\""+(localStorage.ln_sound?localStorage.ln_sound.split("|")[0]:"")+"\" /> <span onclick=\"ln.config.soundChange.t($('input.ln_sound_l').val(), 0);\" tip=\"Przetestuj d\u017Awi\u0119k\">[&#9654;]</span><br /><input type=\"text\" style=\"margin: 2px auto; text-align: center; width: 280px; letter-spacing: -0.5px;\" class=\"ln ln_sound_k\" placeholder=\"d\u017Awi\u0119k kamienia\" value=\""+(localStorage.ln_sound?localStorage.ln_sound.split("|")[1]:"")+"\" /> <span onclick=\"ln.config.soundChange.t($('input.ln_sound_k').val());\" tip=\"Przetestuj d\u017Awi\u0119k\">[&#9654;]</span><br />Zajrzyj na poni\u017Cszego Discorda - znajdziesz tam informacje o wszystkich moich dodatkach, a tak\u017Ce d\u017Awi\u0119ki udost\u0119pnione przez innych graczy.<br /><img src=\"https://cdn.cdnlogo.com/logos/d/64/discord.png\" style=\"width:30px;vertical-align:middle;\" /><a href=\"https://discord.gg/Tb32NXZ\" style=\"font-size:20px;\" target=\"_blank\" tip=\"<b>cLAsick Addons</b><br />Oficjalny serwer dodatk\xF3w by cLAsick\">Discord</a><br />"+drawButton("Zapisz","ln.config.soundChange.s($('input.ln_sound_l').val(),$('input.ln_sound_k').val());")+drawButton("Wr\xF3\u0107","ln.config.open();")+"</div>")},s:function(a="",b=""){localStorage.ln_sound=a+"|"+b,ln.vars.refresh(),hideEnWindow(),message("D\u017Awi\u0119ki zosta\u0142y zapisane")}}},audio:function(a){if("0"==a||"1"==a){$("audio.ln_handler").length||$("<audio class=\"ln_handler\" type=\"audio/mp3\"></audio>").appendTo("body");var b=$("audio.ln_handler").attr("src",ln.vars.sound[a]).get(0);b.pause(),b.currentTime=0,b.volume=parseFloat(ln.vars.settings.vol),b.oncanplay=function(){b.play()},b.onerror=function(){message("Ups, wyst\u0105pi\u0142 b\u0142\u0105d podczas wczytywania d\u017Awi\u0119ku.")}}else message("Ups, wyst\u0105pi\u0142 b\u0142\u0105d podczas wczytywania d\u017Awi\u0119ku.")},msg:{send:function(a){_g("chat",{c:a})},share:function(a){"true"==getCookie("ln_shared_"+a.id)?message("Numerki tego przedmiotu ju\u017C udost\u0119pniono!"):showEnWindow(ln.vars.name,"<div style=\"text-align:center;\">Na kt\xF3rej zak\u0142adce chatu chcesz si\u0119 podzieli\u0107 numerkami tego przedmiotu?<h2 style=\"color:"+ln.vars.settings.color+"; text-shadow: 0 0 1px black, 0 0 5px;\">&#10093; "+a.name+" &#10092;</h2><input type=\"text\" class=\"ln\" value=\""+a.id+"\" tip=\"Kliknij, aby skopiowa\u0107\" onclick=\"var text=$(this);text.select(); document.execCommand('Copy');$('span.ln_copied').fadeIn();\" readonly /><br /><span class=\"ln_copied\" style=\"display:none;\">Skopiowano!</span><br />"+drawButton("Og\xF3lny","setCookie('ln_shared_"+a.id+"', true); ln.msg.send('"+a.name+" ("+a.id+") - "+ln.vars.name+"'); hideEnWindow();")+(0==g.party?"":" "+drawButton("Grupowy","setCookie('ln_shared_"+a.id+"', true); ln.msg.send('/g "+a.name+" ("+a.id+") - "+ln.vars.name+"'); hideEnWindow();"))+" "+drawButton("Rezygnuj","hideEnWindow();")+"</div>")}},news:{engine:function(){"undefined"!=typeof Storage&&localStorage.ln_version?localStorage.ln_version!=ln.vars.version&&ln.news.show():!localStorage.ln_version&&ln.news.show()},show:function(){var a={plus:["Ikonka dodatku ju\u017C nie powinna wyje\u017Cd\u017Ca\u0107 poza stron\u0119","Przerobione okno wskaz\xF3wki zmiany d\u017Awi\u0119ku","Kilka zmian kosmetycznych"],minus:[]},b="<b style=\"color:green;text-shadow: 0 0 2px green;\">Dodano:</b><br />";if(0<a.plus.length)for(x in a.plus)b+="<span style=\"color:green;text-shadow: 0 0 2px green;\">+</span> "+a.plus[x]+".<br />";else b+="brak";if(0<a.minus.length)for(x in b+="<b style=\"color:maroon;text-shadow: 0 0 2px maroon;\">Usuni\u0119to:</b><br />",a.minus)b+="<span style=\"color:maroon;text-shadow: 0 0 2px maroon;\">-</span> "+a.minus[x]+".<br />";showEnWindow(ln.vars.name,"<div style=\"text-align:center;\"><h3>Zmiany w wersji <u>"+ln.vars.version+"</u></h3>"+b+"<br /><hr style=\"width: 75%;\" /><i onclick=\"extManager.task('add_list'); extManager.callDetails(53253); hideEnWindow();\" style=\"cursor:pointer;\">Pami\u0119taj <b>polubi\u0107</b> dodatek je\u015Bli Ci si\u0119 podoba &#128077;</div>"),localStorage.ln_version=ln.vars.version}},vars:{version:"1.1.2",name:"Legendary Notificator",sound:[],world:location.host.split(".")[0],refresh:function(){ln.vars.settings=localStorage.ln_settings?JSON.parse(localStorage.ln_settings):JSON.parse("{\"prefix\":\"Wooow! Spad\u0142a legenda!!! [\",\"suffix\":\"]\",\"color\":\"#FF0000\",\"vol\":\"0.9\",\"clanMsg\":false,\"showMsg\":true,\"border\":\"anim\"}");let b=localStorage.ln_sound?localStorage.ln_sound.split("|"):null;ln.vars.sound[0]=null!=b&&4<b[0].length?b[0]:"https://github.com/githubfrgmsoly/mgnm/blob/main/al1.mp3?v="+ln.vars.version,ln.vars.sound[1]=null!=b&&4<b[1].length?b[1]:"https://raw.githubusercontent.com/clasicker/addons/master/ln_kamien.mp3?v="+ln.vars.version}},reset:function(b=!0){["prefix","suffix","pos","color","version","sound","settings"].forEach(a=>localStorage.removeItem("ln_"+a)),ln.vars.refresh(),b&&message("Ustawienia dodatku zosta\u0142y zresetowane")},init:function(){"undefined"==typeof Storage&&log("[<b>"+ln.vars.name+"</b>] W\u0142\u0105cz dost\u0119p do localStorage lub zaktualizuj przegl\u0105dark\u0119, by w pe\u0142ni korzysta\u0107 z funkcji dodatku.",1),ln.engine(),ln.vars.refresh(),console.log("[CLASICK -> "+ln.vars.name+"] addon loaded (v"+ln.vars.version+").")}};ln.init();
